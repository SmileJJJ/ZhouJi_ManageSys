<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap-table.min.css">
    <style>
        th{
            text-align: center;
            border-left: 1px solid #ddd;
        }

        td{
            text-align: center;
        }

        .table tbody>tr>th {
            padding: 0;
            margin: 0;
            }
    </style>
</head>
<body style="margin-top: 70px">
<div class="container">
    <div>
{#        autofocus="autofocus"#}
        <button id="company_member_btn" class="btn btn-default"  >公司成员</button>
        <button id="customer_info_btn" class="btn btn-default">客户信息</button>
        <button id="build" class="btn btn-default">项目汇总</button>
        <button id="build" class="btn btn-default">产品信息</button>
        <button id="build" class="btn btn-default">产品仓库</button>
    </div>
    <table id="table"
           data-toggle="table"
           data-url="static/data/data.json"
           data-show-columns="true"
           data-search="true"
           data-show-refresh="true"
           data-show-toggle="true"
           data-pagination="true"
           data-height="500"
        >
        <thead>
        <tr id="fields_name">
            {% block fields_name %}
            <th data-field="id" data-formatter="idFormatter">ID</th>
            <th data-field="name">姓名</th>
            <th data-field="gender">性别</th>
            <th data-field="age">年龄</th>
            <th data-field="birthday">出生日期</th>
            <th data-field="phone">联系方式</th>
            <th data-field="email">电子邮箱</th>
            <th data-field="introduce">简介</th>
            {% endblock %}
        </tr>
        </thead>

        <tbody id="fields_info">
        </tbody>

    </table>
</div>
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<!--<script src="assets/bootstrap2.3/js/bootstrap.min.js"></script>-->
<script src="/static/js/tableExport.js"></script>
<script src="/static/js/jquery.base64.js"></script>
<script src="/static/js/bootstrap-table.js"></script>
<script src="/static/js/bootstrap-table-export.js"></script>
<script>

    function get_info(target){
        $.get(
            '/get_info',
            {'target':target},
            function (data) {

                /*
                var html_fields_name = ''
                $.each(data,function (i, obj) {
                    html_fields_name += '<th data-field="'+ obj +'" data-formatter="idFormatter">'+ obj +'</th>';
                })
                $('#fields_name').html('<th data-field="id" data-formatter="idFormatter">ID</th>')

                    console.log(obj)
                    var id = obj.pk
                    var info_arry = obj.fields
                    var html_fields_name='';
                    html_info += '<tr>'
                    html_fields_name += '<th data-field="id" data-formatter="idFormatter">ID</th>';
                    html_info += '<th data-field="'+ id +'" data-formatter="idFormatter">'+ id +'</th>';
                    $.each(info_arry,function (i,fields_info) {
                        if(i != 'password'){
                            html_fields_name += '<th data-field="'+ i +'">'+ i +'</th>';
                            html_info += '<th data-field="'+ fields_info +'" data-formatter="idFormatter" >'+ fields_info +'</th>';
                            console.log(i)
                        }
                        $('#fields_name').html(html_fields_name)
                    })
                    html_info += '</tr>'
                    $('#fields_info').html(html_info)
                })
                */
            },
            'json'
        )
    }

    $(function () {
        {#get_info('company_member')#}
        $('#build').click(build);//.trigger('click');
        $('#cells, #rows').keyup(function (e) {
            if (e.keyCode === 13) {
                build();
            }
        });
    });

    function build() {
        var cells = $('#cells').val(),
            rows = $('#rows').val(),
            i, j, row,
            columns = [],
            data = [];

        for (i = 0; i < cells; i++) {
            columns.push({
                field: 'field' + i,
                title: 'Cell' + i
            });
        }
        for (i = 0; i < rows; i++) {
            row = {};
            for (j = 0; j < cells; j++) {
                row['field' + j] = 'Row-' + i + '-' + j;
            }
            data.push(row);
        }
        $('#table').bootstrapTable('destroy').bootstrapTable({
            columns: columns,
            data: data
        });
    }

    function idFormatter(value) {
        return value + 100;
    }

    $('#customer_info_btn').click(
        function () {
            window.location.href = "/customer_info/";
        }
    )

    $('#company_member_btn').click(
        function () {
            window.location.href = "/";
        }
    )

</script>
</body>
</html>
